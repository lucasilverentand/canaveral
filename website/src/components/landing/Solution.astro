---
// Solution Section - "Mission Control"
import SectionHeader from './shared/SectionHeader.astro';
import Terminal from './shared/Terminal.astro';

const benefits = [
	{
		icon: 'üéØ',
		title: 'Unified Interface',
		description: 'One CLI for all frameworks. Same commands for Flutter, Expo, React Native, and native apps.'
	},
	{
		icon: 'üìù',
		title: 'Declarative Config',
		description: 'TOML configuration instead of Ruby scripts. Version-controlled, team-readable settings.'
	},
	{
		icon: 'üîÑ',
		title: 'CI/CD-First',
		description: 'Built for automation from day one. Works identically locally and in your pipeline.'
	},
	{
		icon: 'üîê',
		title: 'Match-Style Signing',
		description: 'Centralized code signing. Certificates and profiles synced from encrypted git storage.'
	}
];
---

<section class="solution-section" id="solution">
	<div class="container">
		<SectionHeader
			label="The Solution"
			title="Mission Control"
			description="One tool to rule them all. Canaveral unifies mobile release management."
		/>

		<div class="solution-content">
			<div class="hub-diagram">
				<div class="hub-center">
					<div class="hub-logo">
						<span class="hub-icon">üöÄ</span>
						<span class="hub-text">canaveral</span>
					</div>
				</div>
				<div class="hub-spokes">
					<div class="spoke spoke-1">
						<div class="spoke-line"></div>
						<div class="spoke-node">Build</div>
					</div>
					<div class="spoke spoke-2">
						<div class="spoke-line"></div>
						<div class="spoke-node">Test</div>
					</div>
					<div class="spoke spoke-3">
						<div class="spoke-line"></div>
						<div class="spoke-node">Sign</div>
					</div>
					<div class="spoke spoke-4">
						<div class="spoke-line"></div>
						<div class="spoke-node">Ship</div>
					</div>
					<div class="spoke spoke-5">
						<div class="spoke-line"></div>
						<div class="spoke-node">Version</div>
					</div>
					<div class="spoke spoke-6">
						<div class="spoke-line"></div>
						<div class="spoke-node">Metadata</div>
					</div>
				</div>
			</div>

			<div class="terminal-demo">
				<Terminal title="Canaveral CLI" theme="accent">
					<div class="demo-line"><span class="prompt">$</span> <span class="command">canaveral build --platform ios --profile release</span></div>
					<div class="demo-line"><span class="output">Detecting framework... Flutter</span></div>
					<div class="demo-line"><span class="output">Loading config from canaveral.yaml</span></div>
					<div class="demo-line"><span class="output">Building for iOS (release)...</span></div>
					<div class="demo-line"><span class="success">Build complete: MyApp.ipa (42.3 MB)</span></div>
					<div class="demo-line"></div>
					<div class="demo-line"><span class="prompt">$</span> <span class="command">canaveral testflight upload build/ios/*.ipa</span></div>
					<div class="demo-line"><span class="output">Uploading to App Store Connect...</span></div>
					<div class="demo-line"><span class="success">Success! Build 1.2.3 (42) submitted</span></div>
				</Terminal>
			</div>
		</div>

		<div class="benefits-grid">
			{benefits.map((benefit, index) => (
				<div class="benefit-card" style={`--delay: ${index * 0.1}s`}>
					<div class="benefit-icon">{benefit.icon}</div>
					<h3 class="benefit-title">{benefit.title}</h3>
					<p class="benefit-description">{benefit.description}</p>
				</div>
			))}
		</div>
	</div>
</section>

<style>
	.solution-section {
		position: relative;
		padding: 6rem 1.5rem;
		background: linear-gradient(180deg, #1a1a2e 0%, #0f0f1a 100%);
		overflow: hidden;
	}

	.solution-section::before {
		content: '';
		position: absolute;
		inset: 0;
		background: radial-gradient(ellipse at 30% 50%, rgba(255, 107, 53, 0.08) 0%, transparent 50%);
		pointer-events: none;
	}

	.container {
		max-width: 1200px;
		margin: 0 auto;
		position: relative;
		z-index: 1;
	}

	.solution-content {
		display: grid;
		grid-template-columns: 1fr 1.2fr;
		gap: 4rem;
		align-items: center;
		margin-bottom: 4rem;
	}

	/* Hub Diagram */
	.hub-diagram {
		position: relative;
		width: 100%;
		aspect-ratio: 1;
		max-width: 400px;
		margin: 0 auto;
	}

	.hub-center {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 120px;
		height: 120px;
		background: linear-gradient(135deg, #ff6b35 0%, #ff8f5a 100%);
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		box-shadow: 0 0 60px rgba(255, 107, 53, 0.4);
		z-index: 2;
	}

	.hub-logo {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 0.25rem;
	}

	.hub-icon {
		font-size: 2rem;
	}

	.hub-text {
		font-size: 0.75rem;
		font-weight: 600;
		color: white;
		text-transform: lowercase;
	}

	.hub-spokes {
		position: absolute;
		inset: 0;
	}

	.spoke {
		position: absolute;
		top: 50%;
		left: 50%;
	}

	.spoke-line {
		position: absolute;
		width: 80px;
		height: 2px;
		background: linear-gradient(90deg, rgba(255, 107, 53, 0.6) 0%, rgba(255, 107, 53, 0.1) 100%);
		transform-origin: left center;
	}

	.spoke-node {
		position: absolute;
		padding: 0.5rem 1rem;
		background: rgba(255, 255, 255, 0.05);
		border: 1px solid rgba(255, 107, 53, 0.3);
		border-radius: 8px;
		font-size: 0.875rem;
		font-weight: 500;
		color: #e8e8f0;
		white-space: nowrap;
		transition: all 0.3s ease;
	}

	.spoke-node:hover {
		background: rgba(255, 107, 53, 0.1);
		border-color: rgba(255, 107, 53, 0.5);
		transform: scale(1.05);
	}

	.spoke-1 .spoke-line { transform: rotate(-60deg); }
	.spoke-1 .spoke-node { transform: translate(90px, -60px); }

	.spoke-2 .spoke-line { transform: rotate(0deg); }
	.spoke-2 .spoke-node { transform: translate(100px, -12px); }

	.spoke-3 .spoke-line { transform: rotate(60deg); }
	.spoke-3 .spoke-node { transform: translate(90px, 36px); }

	.spoke-4 .spoke-line { transform: rotate(120deg); }
	.spoke-4 .spoke-node { transform: translate(-130px, 36px); }

	.spoke-5 .spoke-line { transform: rotate(180deg); }
	.spoke-5 .spoke-node { transform: translate(-140px, -12px); }

	.spoke-6 .spoke-line { transform: rotate(240deg); }
	.spoke-6 .spoke-node { transform: translate(-140px, -60px); }

	/* Terminal Demo */
	.terminal-demo {
		max-width: 100%;
	}

	.demo-line {
		margin-bottom: 0.5rem;
		font-size: 0.875rem;
	}

	.demo-line:empty {
		height: 1rem;
	}

	/* Benefits Grid */
	.benefits-grid {
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		gap: 1.5rem;
	}

	.benefit-card {
		padding: 1.5rem;
		background: rgba(255, 255, 255, 0.02);
		border: 1px solid rgba(255, 255, 255, 0.08);
		border-radius: 12px;
		transition: all 0.3s ease;
		opacity: 0;
		animation: fadeSlideUp 0.5s ease forwards;
		animation-delay: var(--delay);
	}

	@keyframes fadeSlideUp {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.benefit-card:hover {
		background: rgba(255, 107, 53, 0.05);
		border-color: rgba(255, 107, 53, 0.2);
		transform: translateY(-4px);
	}

	.benefit-icon {
		font-size: 1.5rem;
		margin-bottom: 0.75rem;
	}

	.benefit-title {
		font-size: 1rem;
		font-weight: 600;
		color: #ff6b35;
		margin: 0 0 0.5rem 0;
	}

	.benefit-description {
		font-size: 0.875rem;
		color: #a8a8b8;
		line-height: 1.5;
		margin: 0;
	}

	/* Responsive */
	@media (max-width: 1000px) {
		.solution-content {
			grid-template-columns: 1fr;
			gap: 3rem;
		}

		.hub-diagram {
			max-width: 320px;
		}

		.benefits-grid {
			grid-template-columns: repeat(2, 1fr);
		}
	}

	@media (max-width: 600px) {
		.solution-section {
			padding: 4rem 1rem;
		}

		.hub-diagram {
			max-width: 280px;
		}

		.spoke-node {
			font-size: 0.75rem;
			padding: 0.375rem 0.75rem;
		}

		.benefits-grid {
			grid-template-columns: 1fr;
		}
	}

	/* Light theme */
	:root[data-theme='light'] .solution-section {
		background: linear-gradient(180deg, #fff5f0 0%, #f8f6f4 100%);
	}

	:root[data-theme='light'] .solution-section::before {
		background: radial-gradient(ellipse at 30% 50%, rgba(255, 107, 53, 0.05) 0%, transparent 50%);
	}

	:root[data-theme='light'] .spoke-node {
		background: rgba(255, 255, 255, 0.8);
		border-color: rgba(224, 90, 43, 0.3);
		color: #1a1a2e;
	}

	:root[data-theme='light'] .spoke-node:hover {
		background: rgba(224, 90, 43, 0.1);
	}

	:root[data-theme='light'] .benefit-card {
		background: rgba(255, 255, 255, 0.8);
		border-color: rgba(0, 0, 0, 0.08);
	}

	:root[data-theme='light'] .benefit-card:hover {
		background: rgba(255, 255, 255, 0.95);
		border-color: rgba(224, 90, 43, 0.2);
	}

	:root[data-theme='light'] .benefit-title {
		color: #e05a2b;
	}

	:root[data-theme='light'] .benefit-description {
		color: #666;
	}
</style>
