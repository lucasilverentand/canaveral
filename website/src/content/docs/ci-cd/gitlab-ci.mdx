---
title: GitLab CI
description: Set up CI/CD with GitLab CI.
---

# GitLab CI

Set up Canaveral with GitLab CI/CD.

## Quick Start

Create `.gitlab-ci.yml`:

```yaml
stages:
  - build
  - deploy

build-ios:
  stage: build
  tags: [macos]
  script:
    - curl -fsSL https://get.canaveral.dev | sh
    - export PATH="$HOME/.canaveral/bin:$PATH"
    - canaveral match sync --profile-type appstore --readonly
    - canaveral build --platform ios --profile release --format json
  artifacts:
    paths:
      - build/ios/*.ipa

build-android:
  stage: build
  image: cimg/android:2024.01
  script:
    - curl -fsSL https://get.canaveral.dev | sh
    - export PATH="$HOME/.canaveral/bin:$PATH"
    - canaveral build --platform android --profile release --format json
  artifacts:
    paths:
      - build/android/*.aab

deploy:
  stage: deploy
  needs: [build-ios, build-android]
  script:
    - canaveral testflight upload build/ios/*.ipa
    - canaveral publish google-play --artifact build/android/*.aab --track internal
  only:
    - main
```

## Variables

Configure CI/CD variables in GitLab:

- `MATCH_GIT_URL`
- `MATCH_PASSWORD`
- `APP_STORE_CONNECT_API_KEY_ID`
- `APP_STORE_CONNECT_ISSUER_ID`
- `APP_STORE_CONNECT_API_KEY_PATH`
- `GOOGLE_PLAY_SERVICE_ACCOUNT_KEY`
