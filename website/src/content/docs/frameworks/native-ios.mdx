---
title: Native iOS
description: Build native iOS and macOS apps with Xcode.
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

# Native iOS (Xcode)

Canaveral supports native iOS and macOS applications built with Xcode.

**Supported platforms**: iOS, macOS

## Detection

Canaveral detects native iOS projects by the presence of:
- `.xcworkspace` (with CocoaPods or SPM)
- `.xcodeproj` (standalone projects)

## Build Commands

### iOS Build

```bash
# Auto-detects scheme from workspace/project
canaveral build --platform ios --profile release

# Specify signing identity
canaveral build --platform ios --profile release --signing-identity "Apple Distribution: My Company"

# With team ID
canaveral build --platform ios --profile release --team-id TEAMID123
```

### macOS Build

```bash
canaveral build --platform macos --profile release
```

## Project Types

Canaveral supports:

| Type | Description |
|------|-------------|
| `.xcworkspace` | Workspace with CocoaPods or Swift Package Manager |
| `.xcodeproj` | Standalone Xcode project |
| Swift Package Manager | Projects using SPM exclusively |

## Version Management

Version is read from `Info.plist`:

```xml title="Info.plist"
<key>CFBundleShortVersionString</key>
<string>1.2.3</string>
<key>CFBundleVersion</key>
<string>42</string>
```

```bash
# Show version
canaveral version

# Calculate next version
canaveral version --release-type patch

# Show current version
canaveral version --current
```

## Code Signing

### Using Match (Recommended)

```bash
# Sync certificates
canaveral match sync --profile-type appstore

# Build with automatic signing
canaveral build --platform ios --profile release
```

### Manual Signing

Specify signing options directly via the build command:

```bash
canaveral build --platform ios --profile release \
  --signing-identity "Apple Distribution: Your Company (TEAMID)" \
  --provisioning-profile "Your App Store Profile" \
  --team-id TEAMID123
```

Or configure in `canaveral.yaml`:

```yaml
signing:
  enabled: true
  provider: macos
  identity: "Apple Distribution: Your Company (TEAMID)"
```

## Build Configuration

Pass additional arguments to xcodebuild using `--`:

```bash
# Pass extra xcodebuild args
canaveral build --platform ios --profile release -- -allowProvisioningUpdates -scheme MyAppRelease
```

## Testing

### XCTest

```bash
# Run tests
canaveral test --platform ios

# Run with filter
canaveral test --platform ios --filter "LoginTests"

# JUnit output for CI
canaveral test --platform ios --reporter junit --output test-results/results.xml
```

## CI/CD Integration

### GitHub Actions

```yaml
name: iOS Build
on: [push]

jobs:
  build:
    runs-on: macos-14
    steps:
      - uses: actions/checkout@v4

      - name: Select Xcode
        run: sudo xcode-select -s /Applications/Xcode_15.2.app

      - name: Install Canaveral
        run: curl -fsSL https://get.canaveral.dev | sh

      - name: Install CocoaPods
        run: pod install
        working-directory: ./ios

      - name: Sync Certificates
        run: canaveral match sync --profile-type appstore --readonly
        env:
          MATCH_GIT_URL: ${{ vars.MATCH_GIT_URL }}
          MATCH_PASSWORD: ${{ secrets.MATCH_PASSWORD }}

      - name: Build
        run: canaveral build --platform ios --profile release

      - name: Upload to TestFlight
        run: canaveral testflight upload build/ios/*.ipa
        env:
          APP_STORE_CONNECT_API_KEY_ID: ${{ secrets.APP_STORE_CONNECT_API_KEY_ID }}
          APP_STORE_CONNECT_ISSUER_ID: ${{ secrets.APP_STORE_CONNECT_ISSUER_ID }}
          APP_STORE_CONNECT_API_KEY_PATH: ${{ secrets.APP_STORE_CONNECT_API_KEY_PATH }}
```

## Troubleshooting

### "No scheme found"

List available schemes:

```bash
xcodebuild -list -workspace MyApp.xcworkspace
```

Then specify the scheme:

```bash
canaveral build --platform ios -- -scheme MyScheme
```

### "Signing failed"

Check your signing configuration:

```bash
canaveral doctor
```

Ensure certificates are synced:

```bash
canaveral match sync --profile-type development
```

### "Pod install failed"

Update CocoaPods:

```bash
sudo gem install cocoapods
pod repo update
pod install
```
